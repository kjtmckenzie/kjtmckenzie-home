virtualenv -p python3 env
source env/bin/activate
pip install -r requirements.txt




gcloud beta emulators firestore start
export FIRESTORE_EMULATOR_HOST=::1:8182
export DATASTORE_EMULATOR_HOST=localhost:8081



This works
cd ~/personal/kjtmckenzie-home/
source env/bin/activate
export GOOGLE_APPLICATION_CREDENTIALS=kjtmckenzie-home-fs-e95cb6b832bf.json
python main.py

cd ~/personal/kjtmckenzie-home/; source env/bin/activate; export GOOGLE_APPLICATION_CREDENTIALS=kjtmckenzie-home-fs-e95cb6b832bf.json; python main.py



#TODO
Image resizing cloud function?
Add more comments


# Cloud run

docker build -t gcr.io/kjtmckenzie-home-fs/kjtmckenzie-home-fs:latest .  
export GOOGLE_APPLICATION_CREDENTIALS=`pwd`/kjtmckenzie-home-fs-e95cb6b832bf.json
DEV_FLASK_SECRET=`cat dev_flask_secret.txt`
PORT=8080 && docker run \
       -p 8080:${PORT} \
       -e PORT=${PORT} \
       -e GOOGLE_APPLICATION_CREDENTIALS=/tmp/keys/kjtmckenzie-home-fs-e95cb6b832bf.json \
       -e DEV_FLASK_SECRET=$DEV_FLASK_SECRET \
       -v $GOOGLE_APPLICATION_CREDENTIALS:/tmp/keys/kjtmckenzie-home-fs-e95cb6b832bf.json:ro \
       gcr.io/kjtmckenzie-home-fs/kjtmckenzie-home-fs

docker build -t gcr.io/kjtmckenzie-home-fs/kjtmckenzie-home-fs:latest .  
docker push gcr.io/kjtmckenzie-home-fs/kjtmckenzie-home-fs:latest
gcloud beta run deploy --image gcr.io/kjtmckenzie-home-fs/kjtmckenzie-home-fs --update-env-vars CLOUD_RUN=True



